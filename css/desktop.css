/* css/desktop.css */

/* === 桌面主舞台 === */
#desktop-area {
    flex: 1; position: relative;
    background-size: cover; background-position: center;
    transition: background-image 0.5s ease;
    /* 给右侧侧边栏留出空间，因为侧边栏现在是 absolute */
    padding-right: 0; /* 侧边栏盖在上面，或者你可以设 padding-right: 280px 让桌面变窄 */
    width: 100%;
}

/* 顶部胶囊标签 */
#os-tabs {
    position: absolute; top: 15px; left: 50%; transform: translateX(-50%);
    z-index: 50; display: flex; gap: 8px;
    background: rgba(0,0,0,0.4); padding: 5px 8px; border-radius: 50px;
    backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.15);
}
#os-tabs button {
    background: transparent; border: none; color: rgba(255,255,255,0.6);
    padding: 6px 14px; border-radius: 20px; font-size: 13px; transition: 0.3s;
}
#os-tabs button.active { background: white; color: #000; font-weight: bold; }
#os-tabs button:hover:not(.active) { color: white; background: rgba(255,255,255,0.1); }

/* === 桌面舞台包裹器 === */
#stage-wrapper {
    width: 100%; height: 100%;
    position: relative;
    padding-top: 60px; /* 避开顶部标签 */
    padding-bottom: 60px; /* 避开底部 Dock/Taskbar */
    transition: all 0.5s ease;
}

#desktop-stage {
    width: 100%; height: 100%;
    position: relative;
}

/* === 解决问题3：图标颜色 === */
.app-icon {
    width: 70px; height: 90px;
    position: absolute;
    display: flex; flex-direction: column; align-items: center;
    cursor: pointer; padding: 5px; border-radius: 6px;
    /* 强制文字颜色为白色，带阴影 */
    color: white !important; 
    text-shadow: 0 1px 2px rgba(0,0,0,0.9);
}
.app-icon:hover { background: rgba(255,255,255,0.15); }
.app-icon i { 
    font-size: 42px; margin-bottom: 5px; 
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
    /* 让图标保持原色，不被 color:white 覆盖，如果是 FontAwesome 品牌图标 */
}
.app-icon span {
    font-size: 13px; line-height: 1.2; text-align: center;
    width: 100%; overflow: hidden; text-overflow: ellipsis;
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
}

/* === 解决问题4：手机外壳 === */
/* 当 body 有 mobile-mode 类时生效 */
.mobile-mode #stage-wrapper {
    /* 缩小整个舞台，模拟手机大小 */
    width: 360px; height: 720px;
    margin: 40px auto; /* 居中 */
    border: 12px solid #333; /* 边框 */
    border-radius: 40px;
    box-shadow: 0 0 0 2px #555, 0 20px 50px rgba(0,0,0,0.5); /* 外阴影模拟立体感 */
    background-color: #000;
    overflow: hidden; /* 切掉圆角溢出 */
    padding: 0; /* 手机内部不需要额外的 padding，由 screen 处理 */
    position: relative;
}
.mobile-mode #desktop-stage {
    display: flex; overflow-x: auto; scroll-snap-type: x mandatory;
    height: 100%; width: 100%;
}
.mobile-mode .mobile-screen {
    min-width: 100%; height: 100%;
    scroll-snap-align: start;
    position: relative;
    padding-top: 50px; /* 避开刘海 */
}

/* === 解决问题5：系统拟真 UI === */
/* 通用 */
.sys-ui { position: absolute; z-index: 90; }

/* 1. Windows 任务栏 */
.taskbar-win11 {
    bottom: 0; left: 0; right: 0; height: 48px;
    background: rgba(243, 243, 243, 0.85); /* 浅色磨砂 */
    backdrop-filter: blur(15px);
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 15px; border-top: 1px solid rgba(255,255,255,0.4);
}
.taskbar-win11 .start-btn { 
    font-size: 20px; color: #0078d7; margin-right: 10px; cursor: pointer;
}
.taskbar-win11 .task-icons {
    flex: 1; display: flex; justify-content: center; gap: 15px;
}
.taskbar-win11 .task-icons i {
    font-size: 20px; color: #444; padding: 6px; border-radius: 4px; cursor: pointer; transition: 0.2s;
}
.taskbar-win11 .task-icons i:hover { background: rgba(0,0,0,0.1); }
.taskbar-win11 .tray-area {
    display: flex; gap: 10px; align-items: center; font-size: 12px; color: #444;
}

/* 2. macOS Dock */
.dock-macos {
    bottom: 20px; left: 0; right: 0;
    display: flex; justify-content: center;
    pointer-events: none; /* 让 Dock 两侧可以点击穿透 */
}
.dock-container {
    pointer-events: auto;
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255,255,255,0.2);
    padding: 8px; border-radius: 16px;
    display: flex; gap: 8px; align-items: flex-end;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}
.dock-item {
    width: 45px; height: 45px; background: white; border-radius: 10px;
    display: flex; justify-content: center; align-items: center;
    font-size: 24px; color: #333; cursor: pointer; transition: 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.dock-item:hover { transform: translateY(-10px) scale(1.1); }
.dock-separator { width: 1px; height: 35px; background: rgba(0,0,0,0.2); margin: 0 5px; }

/* 3. 手机状态栏 */
.status-bar-mobile {
    top: 0; left: 0; right: 0; height: 30px;
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 20px; color: white; font-size: 12px; font-weight: bold;
    z-index: 100;
}
/* 手机刘海 */
.status-bar-mobile .notch {
    width: 120px; height: 25px; background: #000;
    border-radius: 0 0 15px 15px;
    position: absolute; top: 0; left: 50%; transform: translateX(-50%);
}
.status-bar-mobile .right-icons { display: flex; gap: 5px; }

/* 右键菜单 */
#context-menu {
    position: absolute; width: 140px; background: rgba(255,255,255,0.95);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2); border-radius: 6px;
    list-style: none; padding: 5px; z-index: 999;
}
#context-menu li { padding: 8px; font-size: 13px; cursor: pointer; display: flex; gap: 8px; border-radius: 4px; }
#context-menu li:hover { background: #0984e3; color: white; }
